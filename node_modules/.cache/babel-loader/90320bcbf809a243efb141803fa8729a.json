{"ast":null,"code":"var _jsxFileName = \"O:\\\\Afteroffice\\\\react11am\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { authenticate, isAuthenticated, signin } from '../api/userAPI';\nimport Footer from '../components/Footer';\nimport Navbar from '../components/Navbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const {\n    user\n  } = isAuthenticated();\n  const navigate = useNavigate();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    signin(email, password).then(data => {\n      if (data.error) {\n        setError(data.error);\n      } else {\n        authenticate(data);\n        setSuccess(true);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const showError = () => {\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const redirect = () => {\n    if (success) {\n      if (user && user.role === 0) {\n        navigate('/user/profile');\n      } else if (user && user.role === 1) {\n        navigate('/admin/dashboard');\n      } else {\n        return;\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"form-signin w-50 m-auto mx-auto my-5 shadow-lg p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [showError(), redirect(), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"mb-4\",\n          src: \"./logo192.png\",\n          alt: \"\",\n          width: \"72\",\n          height: \"57\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-3 fw-normal\",\n          children: \"Please sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"floatingInput\",\n            placeholder: \"name@example.com\",\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"floatingInput\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"floatingPassword\",\n            placeholder: \"Password\",\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"floatingPassword\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkbox mb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              value: \"remember-me\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), \" Remember me\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-100 btn btn-lg btn-primary\",\n          type: \"submit\",\n          onClick: handleSubmit,\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgetpassword\",\n          children: \"Forget Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 60\n        }, this), \"I do not have an account. \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-5 mb-3 text-muted\",\n          children: \"\\xA9 2017\\u20132022\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"QYXhODZhsHAeE2W+EZhOp7P7bR0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","useNavigate","authenticate","isAuthenticated","signin","Footer","Navbar","Login","email","setEmail","password","setPassword","error","setError","success","setSuccess","user","navigate","handleSubmit","e","preventDefault","then","data","catch","err","console","log","showError","redirect","role","target","value"],"sources":["O:/Afteroffice/react11am/src/pages/Login.js"],"sourcesContent":["import React,{useState} from 'react'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { authenticate, isAuthenticated, signin } from '../api/userAPI'\r\nimport Footer from '../components/Footer'\r\nimport Navbar from '../components/Navbar'\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [success, setSuccess] = useState(false)\r\n\r\n  const {user} = isAuthenticated()\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    signin(email, password)\r\n    .then(data=>{\r\n      if(data.error){\r\n        setError(data.error)\r\n      }\r\n      else{\r\n        authenticate(data)\r\n        setSuccess(true)\r\n\r\n      }\r\n    })\r\n    .catch(err=>console.log(err))\r\n  }\r\n\r\n  const showError = () => {\r\n    if(error){\r\n      return <div className='alert alert-danger'>{error}</div>\r\n    }\r\n  }\r\n  const redirect = () => {\r\n    if(success){\r\n      if(user&&user.role === 0 ){\r\n        navigate('/user/profile')\r\n      }\r\n      else if(user && user.role === 1){\r\n        navigate('/admin/dashboard')\r\n      }\r\n      else{\r\n        return \r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"form-signin w-50 m-auto mx-auto my-5 shadow-lg p-5\">\r\n        <form>\r\n          {showError()}\r\n          {redirect()}\r\n          <img className=\"mb-4\" src=\"./logo192.png\" alt=\"\" width=\"72\" height=\"57\" />\r\n          <h1 className=\"h3 mb-3 fw-normal\">Please sign in</h1>\r\n\r\n          <div className=\"form-floating mb-2\">\r\n            <input type=\"email\" className=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\" onChange={e=>setEmail(e.target.value)} />\r\n            <label htmlFor=\"floatingInput\">Email address</label>\r\n          </div>\r\n          <div className=\"form-floating mb-2\">\r\n            <input type=\"password\" className=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\" onChange={e=>setPassword(e.target.value)} />\r\n            <label htmlFor=\"floatingPassword\">Password</label>\r\n          </div>\r\n\r\n          <div className=\"checkbox mb-3\">\r\n            <label>\r\n              <input type=\"checkbox\" value=\"remember-me\" /> Remember me\r\n            </label>\r\n          </div>\r\n          <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\" onClick={handleSubmit}>Sign in</button>\r\n          <Link to='/forgetpassword'>Forget Password</Link><br/>\r\n          I do not have an account. <Link to= '/register'>Register</Link>\r\n          <p className=\"mt-5 mb-3 text-muted\">&copy; 2017–2022</p>\r\n        </form>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}